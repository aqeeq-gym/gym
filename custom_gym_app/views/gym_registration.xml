<odoo>
    <data>
        <record id="sale_subscription_view_kanban_inherit" model="ir.ui.view">
            <field name="name">sale.subscription.kanban.inheritance</field>
            <field name="model">sale.subscription</field>
            <field name="inherit_id" ref="sale_subscription.sale_subscription_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//kanban" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath>
            </field>
        </record>

        <record id="sale_subscription_view_list_inherit" model="ir.ui.view">
            <field name="name">sale.subscription.tree.inheritance</field>
            <field name="model">sale.subscription</field>
            <field name="inherit_id" ref="sale_subscription.sale_subscription_view_list"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath>
            </field>
        </record>

        <record id="sale_subscription_view_form_inherit" model="ir.ui.view">
            <field name="name">sale.subscription.form.inheritance</field>
            <field name="model">sale.subscription</field>
            <field name="inherit_id" ref="sale_subscription.sale_subscription_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath>
            </field>
        </record>

        <record id="res_partner_kanban_view_inheritance" model="ir.ui.view">
            <field name="name">res.partner.kanban.inheritance</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban" default_group_by="member_status" sample="1">
                    <field name="id"/>
                    <field name="color"/>
                    <field name="display_name"/>
                    <field name="title"/>
                    <field name="email"/>
                    <field name="parent_id"/>
                    <field name="is_company"/>
                    <field name="function"/>
                    <field name="phone"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="mobile"/>
                    <field name="state_id"/>
                    <field name="category_id"/>
                    <field name="image_128"/>
                    <field name="type"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
                                <t t-if="!record.is_company.raw_value">
                                    <t t-if="record.type.raw_value === 'delivery'" t-set="placeholder" t-value="'/base/static/img/truck.png'"/>
                                    <t t-elif="record.type.raw_value === 'invoice'" t-set="placeholder" t-value="'/base/static/img/money.png'"/>
                                    <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                                    <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                                    </div>
                                    <div class="o_kanban_image d-md-none" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value" t-att-alt="record.parent_id.value" t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                                    </div>
                                </t>
                                <t t-else="">
                                    <t t-set="placeholder" t-value="'/base/static/img/company_image.png'"/>
                                    <div class="o_kanban_image_fill_left o_kanban_image_full" t-attf-style="background-image: url(#{kanban_image('res.partner', 'image_128', record.id.raw_value, placeholder)})" role="img"/>
                                </t>
                                <div class="oe_kanban_details d-flex flex-column">
                                    <strong class="o_kanban_record_title oe_partner_heading"><field name="display_name"/></strong>
                                    <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                                    <ul>
                                        <li t-if="record.parent_id.raw_value and !record.function.raw_value"><field name="parent_id"/></li>
                                        <li t-if="!record.parent_id.raw_value and record.function.raw_value"><field name="function"/></li>
                                        <li t-if="record.parent_id.raw_value and record.function.raw_value"><field name="function"/> at <field name="parent_id"/></li>
                                        <li t-if="record.city.raw_value or record.country_id.raw_value">
                                            <t t-if="record.city.raw_value"><field name="city"/><t t-if="record.country_id.raw_value">, </t></t>
                                            <t t-if="record.country_id.raw_value"><field name="country_id"/></t>
                                        </li>
                                        <li t-if="record.email.raw_value" class="o_text_overflow"><field name="email"/></li>
                                    </ul>
                                    <div class="o_row">
                                        <span class="oe_kanban_partner_links"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="form_res_partner_inheritance" model="ir.ui.view">
            <field name="name">res.partner.form.inheritance</field>
            <field name="model">res.partner</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <field name="company_type" position="replace"/>

                <field name="type" position="before">
                    <field name="member_status" string="Member Status" widget="radio"/>
                    <field name="id" string="Identification No."/>
                </field>

                <xpath expr="//span[@name='address_name']" position="replace">
                     <span class="o_form_label o_td_label" name="address_name">
                        <b>Member Address</b>
                    </span>
                </xpath>

                <field name="vat" position="replace">
                    <field name="national_id"/>
                    <field name="birth_date"/>
                    <field name="nationality"/>
                    <field name="member_selection"/>
                </field>

                <field name="website" position="attributes">
                    <attribute name="string">Website Link</attribute>
                </field>

                 <xpath expr="//notebook[@colspan='4']" position="before">
                     <group>
                         <field name="gym_type" widget="radio"/>
                     </group>
                 </xpath>
            </field>
        </record>

        <record id="search_res_partner_inheritance" model="ir.ui.view">
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name" filter_domain="['|', '|', ('display_name', 'ilike', self), ('ref', '=', self), ('email', 'ilike', self)]"/>
                    <field name="parent_id" domain="[('is_company', '=', True)]" operator="child_of"/>
                    <field name="email" filter_domain="[('email', 'ilike', self)]"/>
                    <field name="phone" filter_domain="['|', ('phone', 'ilike', self), ('mobile', 'ilike', self)]"/>
                    <field name="user_id"/>

                    <separator/>
                        <filter string="Individuals" name="type_person" domain="[('is_company', '=', False)]"/>
                        <filter string="Companies" name="type_company" domain="[('is_company', '=', True)]"/>
                    <separator/>
                        <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                    <separator/>

                    <group expand="0" name="group_by" string="Group By">
                        <filter name="salesperson" string="Salesperson" domain="[]" context="{'group_by' : 'user_id'}"/>
                        <filter name="group_company" string="Company" context="{'group_by': 'parent_id'}"/>
                        <filter name="group_country" string="Country" context="{'group_by': 'country_id'}"/>
                    </group>

                     <filter name="today" string="Today" domain="[('create_date','&gt;', (context_today() - datetime.timedelta(days=1)).strftime('%Y-%m-%d'))]"/>
                     <filter name="this_week" string="This Week" domain="[('create_date','&gt;', (context_today()+relativedelta(days=-7)).strftime('%%Y-%m-%d'))]"/>
                     <filter name="this_month" string="This Month" domain="[('create_date','&gt;', (context_today()+relativedelta(days=-30)).strftime('%%Y-%m-%d'))]"/>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_res_partner_inheritance">
            <field name="name">Members</field>
            <field name="res_model">res.partner</field>
            <field name="domain">[('category_id.name', '=', 'Gym'), ('gym_type', '!=', 'trainer')]</field>
            <field name="context">{'search_default_category_id': 1}</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0), (0, 0, {'view_mode': 'kanban', 'view_id': ref('custom_gym_app.res_partner_kanban_view_inheritance')}), (0, 0, {'view_mode': 'tree'}), (0, 0, {'view_mode': 'form', 'view_id': ref('custom_gym_app.form_res_partner_inheritance')})]"/>
        </record>

        <record model="ir.actions.act_window" id="action_res_trainer_inheritance">
            <field name="name">Trainers</field>
            <field name="res_model">res.partner</field>
            <field name="domain">[('category_id.name', '=', 'Gym'), ('gym_type', '=', 'trainer')]</field>
            <field name="context">{'search_default_category_id': 1}</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0), (0, 0, {'view_mode': 'kanban'}), (0, 0, {'view_mode': 'tree'}), (0, 0, {'view_mode': 'form', 'view_id': ref('custom_gym_app.form_res_partner_inheritance')})]"/>
        </record>

        <record model="ir.actions.act_window" id="action_res_user_inheritance">
            <field name="name">Portal Management</field>
            <field name="res_model">res.users</field>
            <field name="domain">[('share', '=', True)]</field>
            <field name="view_mode">kanban,tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="action_subscription_inheritance">
            <field name="name">Subscriptions</field>
            <field name="res_model">sale.subscription</field>
            <field name="view_mode">kanban,tree,form,pivot,graph,cohort,activity</field>
        </record>

        <record model="ir.actions.act_window" id="action_planning_slot_inheritance">
            <field name="name">Planning</field>
            <field name="res_model">planning.slot</field>
            <field name="view_mode">gantt,tree,form,pivot</field>
        </record>

        <record model="ir.actions.act_window" id="action_move_out_invoice_type_inheritance" >
            <field name="name">Invoices</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_user_id', '=', uid)]</field>
            <field name="context">{'default_move_type': 'out_invoice'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a customer invoice
              </p><p>
                Create invoices, register payments and keep track of the discussions with your customers.
              </p>
            </field>
        </record>

        <menuitem name="Aqeeq Gym" id="menu_res_partner_inheritance" sequence="1"
                  web_icon="custom_gym_app,static/description/menu.jpg"/>

        <menuitem name="Members" id="menu_gym_membership" sequence="1"
                  action="custom_gym_app.action_res_partner_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance"/>

        <menuitem name="Trainers" id="menu_gym_trainers" sequence="2"
                  action="custom_gym_app.action_res_trainer_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance"/>

        <menuitem name="Sales" id="menu_gym_sale_orders" sequence="3"
                  action="sale.action_quotations_with_onboarding"
                  parent="custom_gym_app.menu_res_partner_inheritance"
                  groups="custom_gym_app.group_gym_manager"/>

        <menuitem name="Subscriptions" id="menu_gym_subscription" sequence="4"
                  action="custom_gym_app.action_subscription_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance"/>

        <menuitem name="Planning" id="x_menu_gym_planning" sequence="5"
                  action="custom_gym_app.action_planning_slot_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance"/>

        <menuitem name="Invoices" id="menu_gym_invoices_manager" sequence="6"
                  action="account.action_move_out_invoice_type"
                  parent="custom_gym_app.menu_res_partner_inheritance" groups="custom_gym_app.group_gym_manager"/>

        <menuitem name="Invoices" id="menu_gym_invoices_trainer" sequence="7"
                  action="custom_gym_app.action_move_out_invoice_type_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance" groups="custom_gym_app.group_gym_trainer"/>

        <menuitem name="Portal Management" id="menu_gym_portal_management" sequence="8"
                  action="custom_gym_app.action_res_user_inheritance"
                  parent="custom_gym_app.menu_res_partner_inheritance"/>

        <menuitem name="Employees" id="menu_gym_planning" sequence="9"
                  action="hr.open_view_employee_list_my"
                  parent="custom_gym_app.menu_res_partner_inheritance"
                  groups="custom_gym_app.group_gym_manager"/>
    </data>
</odoo>